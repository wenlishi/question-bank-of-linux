# 试卷导入和使用指南

## 概述

本系统支持导入和管理6套试卷，每套试卷可以包含选择题和填空题。试卷模式允许用户按套做题，模拟真实考试环境。

## 第一步：准备试卷数据

### 1. 数据格式
试卷数据使用JSON格式，包含两个部分：
- `questions`: 题目列表
- `papers`: 试卷列表

### 2. 题目格式
每个题目包含以下字段：
```json
{
  "type": "single_choice",  // 题型: single_choice, multiple_choice, true_false, fill_blank
  "category": "科目名称",    // 分类: 如数学、语文等
  "difficulty": "easy",     // 难度: easy, medium, hard
  "question": "题目内容",   // 题目文本
  "options": ["选项A", "选项B", "选项C", "选项D"],  // 选项（填空题为空数组）
  "answer": ["正确答案"],    // 答案（多选题为数组）
  "explanation": "题目解析", // 解析
  "score": 5               // 分值
}
```

### 3. 试卷格式
每套试卷包含以下字段：
```json
{
  "title": "试卷标题",
  "description": "试卷描述",
  "time_limit": 60,        // 时间限制（分钟）
  "total_score": 100,      // 总分
  "question_ids": [1, 2, 3, 4]  // 题目ID列表（对应questions中的id）
}
```

## 第二步：导入试卷

### 方法一：使用示例数据（快速开始）
```bash
cd tiku_software
python import_papers.py create
```
这会创建6套示例试卷，包含数学、科学、语文、英语、历史、地理等科目。

### 方法二：从JSON文件导入
1. 按照`试卷模板.json`的格式准备你的6套试卷数据
2. 保存为JSON文件，例如`my_papers.json`
3. 运行导入命令：
```bash
python import_papers.py import my_papers.json
```

### 方法三：使用管理工具
系统还提供了其他管理命令：
```bash
# 列出所有试卷
python import_papers.py list

# 显示统计信息
python import_papers.py stats

# 导出数据
python import_papers.py export
```

## 第三步：在软件中使用试卷

### 1. 启动软件
```bash
python main.py
```

### 2. 激活软件
如果是第一次使用，需要输入激活码激活。

### 3. 使用试卷模式
1. 点击"试卷模式"标签页
2. 从列表中选择一套试卷
3. 查看试卷信息（题目数量、时间限制等）
4. 点击"开始做这套试卷"按钮

### 4. 做题界面
- 显示当前题目和进度
- 选择题：单选或复选
- 填空题：输入答案
- 使用"上一题"/"下一题"按钮导航
- 点击"交卷"完成试卷

### 5. 查看成绩
交卷后显示：
- 总题数和正确数
- 得分和总分
- 正确率

## 第四步：管理试卷

### 查看试卷列表
在"试卷模式"标签页中，可以查看所有可用的试卷。

### 试卷统计
系统会记录：
- 每套试卷的做题次数
- 平均得分
- 最佳成绩

### 数据备份
试卷数据保存在：
- `data/papers.json` - 试卷信息
- `data/questions.json` - 题目信息

建议定期备份这些文件。

## 高级功能

### 1. 随机组卷
可以使用代码随机生成试卷：
```python
from core.paper_manager import PaperManager
manager = PaperManager()

# 随机生成包含50道题的试卷
paper_id = manager.generate_random_paper(
    title="随机测试卷",
    question_count=50,
    question_types=["single_choice", "fill_blank"]
)
```

### 2. 题目搜索
```python
# 搜索包含关键词的题目
results = manager.search_questions(
    keyword="数学",
    question_type="single_choice",
    difficulty="easy"
)
```

### 3. 批量导入
支持从多个JSON文件批量导入题目和试卷。

## 常见问题

### Q: 题目ID如何分配？
A: 系统会自动分配ID，从1开始递增。在`question_ids`中引用这些ID。

### Q: 可以修改已导入的试卷吗？
A: 可以，但需要直接编辑JSON文件或使用管理工具。

### Q: 支持图片题目吗？
A: 当前版本只支持文本题目。

### Q: 试卷有时间限制吗？
A: 可以设置时间限制，但当前版本只记录时间，不强制交卷。

### Q: 数据安全吗？
A: 题目数据未加密存储，建议不要包含敏感信息。

## 最佳实践

### 1. 题目设计
- 单选题：4个选项，1个正确答案
- 多选题：4个选项，2-3个正确答案
- 判断题：明确对错
- 填空题：答案明确无歧义

### 2. 试卷设计
- 每套试卷20-50题为宜
- 包含不同难度的题目
- 合理分配分值
- 设置合理的考试时间

### 3. 数据管理
- 定期备份数据文件
- 使用版本控制管理题目库
- 建立题目审核流程

## 技术支持

如有问题，请检查：
1. JSON格式是否正确
2. 文件路径是否正确
3. 依赖是否已安装：`pip install PyQt5 pycryptodome`

如需进一步帮助，请联系开发者。